---
const totalItems = 4;
---

<article class="flex flex-col items-center justify-center gap-8 text-gray-700 dark:text-gray-300 md:flex-row">
  <div class="relative overflow-x-auto shadow-md sm:rounded-lg">
    <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
      <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
        <tr>
          <th class="px-6 py-3">Machine Name</th>
          <th class="px-6 py-3">Difficulty</th>
          <th class="px-6 py-3">Platform</th>
          <th class="px-6 py-3">Link</th>
          <th class="px-6 py-3">Write-Up</th>
        </tr>
      </thead>
      <tbody id="table-body"></tbody>
    </table>

    <!-- Paginación -->
    <nav class="flex items-center justify-between pt-4">
      <span class="text-sm text-gray-500 dark:text-gray-400">
        Showing <strong id="page-range" class="text-gray-900 dark:text-white"></strong> of 
        <strong class="text-gray-900 dark:text-white">{totalItems}</strong>
      </span>
      <ul class="inline-flex items-center">
        <li>
          <button id="prev-page" class="px-3 py-1 border rounded-l-lg dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-100 disabled:opacity-50" disabled>
            Previous
          </button>
        </li>
        <li>
          <button id="next-page" class="px-3 py-1 border rounded-r-lg dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-100 disabled:opacity-50">
            Next
          </button>
        </li>
      </ul>
    </nav>
  </div>
</article>

<script>
  let currentPage = 1;
  const itemsPerPage = 10;

  // Lista de productos personalizados
  const products = [
    { name: "Laptop HP", difficulty: "15-inch, 8GB RAM", platform: "Electronics", machine: "http" },
    { name: "Mouse Logitech", difficulty: "Wireless, ergonomic", platform: "Accessories", machine: "http" },
    { name: "Cafetera Nespresso", difficulty: "Modelo Vertuo, cápsulas", platform: "Home", machine: "http" },
    { name: "Smartphone Samsung", difficulty: "Galaxy S22, 128GB", platform: "Electronics", machine: "http" }
  ];

  const totalItems = products.length; // Solo los productos definidos
  const totalPages = Math.ceil(totalItems / itemsPerPage);

  function loadTable() {
    const tableBody = document.getElementById("table-body");
    tableBody.innerHTML = "";
    const start = (currentPage - 1) * itemsPerPage;
    const end = Math.min(currentPage * itemsPerPage, totalItems);
    
    for (let i = start; i < end; i++) {
      const product = products[i];
      if (!product) break; // Evita errores si hay menos productos que el límite de la página

      const row = document.createElement("tr");
      row.className = "bg-white border-b dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-600";
      row.innerHTML = `
        <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">${product.name}</td>
        <td class="px-6 py-4">${product.difficulty}</td>
        <td class="px-6 py-4">${product.platform}</td>
        <td class="px-6 py-4">
          <a href="${product.machine}" class="font-medium text-blue-600 dark:text-blue-500 hover:underline">Machine</a>
        </td>
        <td class="px-6 py-4">
          <a href="#" class="font-medium text-blue-600 dark:text-blue-500 hover:underline">Write-Up</a>
        </td>
      `;
      tableBody.appendChild(row);
    }

    document.getElementById("page-range").textContent = `${start + 1}-${end}`;
    document.getElementById("prev-page").disabled = currentPage === 1;
    document.getElementById("next-page").disabled = currentPage === totalPages;
  }

  document.getElementById("prev-page").addEventListener("click", () => {
    if (currentPage > 1) {
      currentPage--;
      loadTable();
    }
  });

  document.getElementById("next-page").addEventListener("click", () => {
    if (currentPage < totalPages) {
      currentPage++;
      loadTable();
    }
  });

  loadTable();
</script>
